<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <link rel="icon" href="Img/icon.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Patrim√¥nios</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; } /* Tailwind utility class */
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Logo -->
    <div class="container text-center my-4">
        <img src="Img/Logo.png" alt="Logo da Aplica√ß√£o" class="img-fluid mx-auto" style="max-width: 200px;">
    </div>

    <div class="container mt-5">
        <!-- Bot√µes de Navega√ß√£o -->
        <div class="d-flex justify-content-center gap-3">
            <button class="btn btn-primary" onclick="openTab('inserir')">Inserir Patrim√¥nio</button>
            <button class="btn btn-secondary" onclick="openTab('patrimonios')">Patrim√¥nios</button>
            <button class="btn btn-success" onclick="openTab('dashboard')">Dashboard</button>
            <button class="btn btn-danger" onclick="logout()">Sair</button>
        </div>

        <!-- Aba: Inserir Patrim√¥nio -->
        <div id="inserir" class="tab-content mt-4">
            <h2 class="text-center text-lg font-bold">Inserir Patrim√¥nio</h2>
            <div class="flex flex-col items-center gap-3 mt-4">
                
                <!-- Inser√ß√£o de Roteador -->
                <input type="text" id="patrimonioRoteador" class="form-control w-50" placeholder="C√≥digo do Roteador">
                <input type="text" id="tecnicoRoteador" class="form-control w-50" placeholder="Nome do T√©cnico">
                <input type="text" id="motivoRoteador" class="form-control w-50" placeholder="Motivo da Troca">
                <button class="btn btn-primary" onclick="adicionarPatrimonio('Roteador')">Adicionar Roteador</button>

                <!-- Inser√ß√£o de ONU -->
                <input type="text" id="patrimonioOnu" class="form-control w-50" placeholder="C√≥digo da ONU">
                <input type="text" id="tecnicoOnu" class="form-control w-50" placeholder="Nome do T√©cnico">
                <input type="text" id="motivoOnu" class="form-control w-50" placeholder="Motivo da Troca">
                <button class="btn btn-primary" onclick="adicionarPatrimonio('Onu')">Adicionar ONU</button>
            </div>
        </div>

        <!-- Aba: Patrim√¥nios -->
        <div id="patrimonios" class="tab-content mt-4 hidden">
            <h2 class="text-center text-lg font-bold">Patrim√¥nios</h2>
            <div class="d-flex justify-content-between my-3">
                <button class="btn btn-warning" id="btnOcultarPatrimonios">Ocultar Patrim√¥nios Anteriores</button>
                <button class="btn btn-danger" id="btnLimparPatrimonios">Limpar Patrim√¥nios</button>
            </div>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Patrim√¥nio</th>
                        <th>Data e Hora</th>
                        <th>Nome do T√©cnico</th>
                        <th>Motivo da Troca</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="listaPatrimonios"></tbody>
            </table>
        </div>

        <!-- Aba: Dashboard -->
        <div id="dashboard" class="tab-content mt-4 hidden">
            <h2 class="text-center text-lg font-bold">Dashboard Patrim√¥nios</h2>
            <div id="graficoPatrimonios" class="flex justify-center"></div>
            <div class="d-flex justify-content-center gap-5 mt-4">
                <div class="bg-blue-500 text-white text-center p-3 rounded w-32">
                    <p>Total Roteador</p>
                    <p id="totalRoteador">0</p>
                </div>
                <div class="bg-green-500 text-white text-center p-3 rounded w-32">
                    <p>Total ONU</p>
                    <p id="totalOnu">0</p>
                </div>
                <div class="bg-gray-700 text-white text-center p-3 rounded w-32">
                    <p>Total Geral</p>
                    <p id="totalGeral">0</p>
                </div>
                <div class="bg-orange-500 text-white text-center p-3 rounded w-32">
                    <p>M√©dia Di√°ria</p>
                    <p id="mediaDiaria">0</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toasts para Mensagens -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050;">
        <div id="toast-container"></div>
    </div>
    
<!-- Firebase SDK via CDN -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

<script>
    // Configura√ß√£o do Firebase (dados corrigidos)
    const firebaseConfig = {
        apiKey: "AIzaSyC9Pe71GB73lxPhKU38Hep7JoBC1aL4PJo",
        authDomain: "patrimonios-57aa3.firebaseapp.com",
        databaseURL: "https://patrimonios-57aa3-default-rtdb.firebaseio.com",
        projectId: "patrimonios-57aa3",
        storageBucket: "patrimonios-57aa3.appspot.com", // üîπ Corrigido aqui!
        messagingSenderId: "445004323988",
        appId: "1:445004323988:web:0294fcf92592e1be3be881"
    };

    // üîπ Inicializa o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
</script>


    <script>
        const usuarioLogado = localStorage.getItem("usuarioLogado");
    
        if (!usuarioLogado) {
            window.location.href = "login.html"; // Se n√£o estiver logado, redireciona
        } else if (usuarioLogado !== "adm") {
            document.addEventListener("DOMContentLoaded", () => {
                document.getElementById("btnAbaPatrimonios").style.display = "none"; // Oculta a aba para usu√°rios comuns
            });
        }
    </script>

<script>
    function logout() {
        localStorage.removeItem("usuarioLogado"); // Remove a sess√£o
        window.location.href = "login.html"; // Redireciona para login
    }
</script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
